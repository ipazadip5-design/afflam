const p=[{prefix:"https://corsproxy.io/?",encoding:"encode"},{prefix:"https://api.codetabs.com/v1/proxy?quest=",encoding:"none"}],l=async(n,s)=>{const t=n.toString();let e=null;for(const o of p){const c=o.encoding==="encode"?encodeURIComponent(t):t,a=`${o.prefix}${c}`;try{const r=await fetch(a,{...s,signal:AbortSignal.timeout(15e3)});if(r.ok)return r;e=new Error(`Proxy ${new URL(o.prefix).hostname} failed with status: ${r.status}`)}catch(r){e=r,console.warn(`Proxy ${new URL(o.prefix).hostname} failed with error: ${r.message}. Trying next...`)}}const i=new Error(`All configured proxies failed to fetch the resource. Last error: ${(e==null?void 0:e.message)||"Unknown fetch error"}`);throw console.error("All proxies failed. Last error:",e),i};export{l as p};
